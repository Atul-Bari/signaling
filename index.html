<!DOCTYPE html>
<html>
<head>
<h3>Golang Media Server Test<h3>
</head>
<body>
<div id="output"></div>
<button onclick="getLocalStream()">Get Media</button>
<button onclick="register()">Register</button>
<button>EchoTest</button>
<button>Make call</button>
<button>Join</button>
<video id="stream" autoplay controls>Your browser does not support video</video> 
<script>
var payloadregister = {
	peerId: "client1"
    }
var output = document.getElementById("output");
var print = function(message) {
	var d = document.createElement("div");
	d.textContent = message;
	output.appendChild(d);
};

function register() {
    ws = new WebSocket("ws://203.153.53.181:51000/ws");
    ws.onopen = function(evt) {
    print("Connection is established \n");
    ws.send(JSON.stringify(payload))
    }
}

function getLocalStream() { 
    var vidstream = document.getElementById("stream");
         var constraints = {"video":true,"audio":true};

  var media = navigator.mediaDevices.getUserMedia(constraints); 
  console.log(media);

  //var tracks = media.getTracks();
  //console.log(track);

  var videoelement = document.querySelector("#stream");
  videoelement.srcObject = media

}
// ws = new WebSocket("{{.}}");
// ws.onopen = function(evt) {
// 	print("Connection is established \n");
// 	ws.send(JSON.stringify(payload))
// }
// ws.onclose = function(evt) {
// 	print("Connection closed \n");
//     ws = null;
// }
// ws.onmessage = function(evt) {
//     print("RESPONSE: " + evt.data);
// }
// ws.onerror = function(evt) {
//     print("ERROR: " + evt.data);
// }
window.onload = function() { 
         
       }; 

</script>

</body>
</html>
